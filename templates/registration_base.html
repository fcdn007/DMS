{% load static %}
<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>华大数极数据库管理系统</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- 解决 Not Found: /favicon2.ico -->
    <link href="{% static 'image/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="{% static 'font-awesome/css/all.css' %}">
    <!-- Ionicons -->
    <link rel="stylesheet" href="{% static 'stylesheets/ionicons.min.css' %}">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="{% static 'adminlte/plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'adminlte/dist/css/adminlte.min.css' %}">
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="{% static 'stylesheets/Google_Front.Source_Sans_Pro.css' %}">

  <style>
	/* 页面加载完后再显示，更好的显示特效 */
	body {
		display : none;
	}
  </style>

</head>
<body class="hold-transition login-page content-list">
<div class="login-box">
  <div class="login-logo">
    <b>华大数极数据库<br>管理系统</b>
  </div>

  {% block content %}
  {% endblock %}
</div>
<!-- /.login-box -->

<!-- jQuery -->
<script src="{% static 'adminlte/plugins/jquery/jquery.min.js' %}"></script>
<!-- Bootstrap 4 -->
<script src="{% static 'adminlte/plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- custom javascript -->
<script src="{% static 'javascript/custom.js' %}"></script>
<script>
  $(document).ready(function () {
    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
          let cookies = document.cookie.split(';');
          for (let i = 0; i < cookies.length; i++) {
              let cookie = jQuery.trim(cookies[i]);
              // Does this cookie string begin with the name we want?
              if (cookie.substring(0, name.length + 1) === (name + '=')) {
                  cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                  break;
              }
          }
      }
      return cookieValue;
  }

    function csrfSafeMethod(method) {
        // 这些HTTP方法不要求CSRF包含
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    let csrftoken = getCookie('csrftoken');

    $.ajaxSetup({
      beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
          xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
      }
    });

  });
</script>
{% block extra_js %}
{% endblock %}
</body>
</html>